#pragma once

#include "ofMain.h"

// To set this up (note - 2 onward are already done in this app!)
// 1 - Clone https://github.com/armadillu/ofxTurboJpeg.git into addons/ofxTurboJpeg
// 2 - Add "Copy files build phase" in the 'targets->build phases menu'
// 3 - Add ofxTurboJpeg/libs/turbo-jpeg/lib/osx/libturbojpeg.dylib to the phase
// 4 - Make sure the dylib is copied to the "executables" directory!

#include "ofxTurboJpeg.h"
#include "ofxLibwebsockets.h"

#define NUM_MESSAGES 20 // how many past messages we want to keep

class ofApp : public ofBaseApp{

	public:
		void setup();
		void update();
		void draw();

		void keyPressed  (int key);
		void keyReleased(int key);
		void mouseMoved(int x, int y );
		void mouseDragged(int x, int y, int button);
		void mousePressed(int x, int y, int button);
		void mouseReleased(int x, int y, int button);
		void windowResized(int w, int h);
		void dragEvent(ofDragInfo dragInfo);
		void gotMessage(ofMessage msg);
		
    
        ofImage testImage;
        ofTexture text;
        ofBuffer decodedImage;
        ofxLibwebsockets::Server server;
    
        ofTrueTypeFont font;
        vector<string> messages;
    
        bool needToLoad, locked;    
        string  toLoad;
    
    int panel1[288] = {4536,4752,4968,4539,4755,4971,3888,4104,4320,3891,4107,4323,3240,3456,3672,3243,3459,3675,2592,2808,3024,2595,2811,3027,1944,2160,2376,1947,2163,2379,1296,1512,1728,1299,1515,1731,648,864,1080,651,867,1083,0,216,432,3,219,435,4542,4758,4974,4545,4761,4977,3894,4110,4326,3897,4113,4329,3246,3462,3678,3249,3465,3681,2598,2814,3030,2601,2817,3033,1950,2166,2382,1953,2169,2385,1302,1518,1734,1305,1521,1737,654,870,1086,657,873,1089,6,222,438,9,225,441,4548,4764,4980,4551,4767,4983,3900,4116,4332,3903,4119,4335,3252,3468,3684,3255,3471,3687,2604,2820,3036,2607,2823,3039,1956,2172,2388,1959,2175,2391,1308,1524,1740,1311,1527,1743,660,876,1092,663,879,1095,12,228,444,15,231,447,4554,4770,4986,4557,4773,4989,3906,4122,4338,3909,4125,4341,3258,3474,3690,3261,3477,3693,2610,2826,3042,2613,2829,3045,1962,2178,2394,1965,2181,2397,1314,1530,1746,1317,1533,1749,666,882,1098,669,885,1101,18,234,450,21,237,453,4560,4776,4992,4563,4779,4995,3912,4128,4344,3915,4131,4347,3264,3480,3696,3267,3483,3699,2616,2832,3048,2619,2835,3051,1968,2184,2400,1971,2187,2403,1320,1536,1752,1323,1539,1755,672,888,1104,675,891,1107,24,240,456,27,243,459,4566,4782,4998,4569,4785,5001,3918,4134,4350,3921,4137,4353,3270,3486,3702,3273,3489,3705,2622,2838,3054,2625,2841,3057,1974,2190,2406,1977,2193,2409,1326,1542,1758,1329,1545,1761,678,894,1110,681,897,1113,30,246,462,33,249,465};
    int panel2[288] = {4572,4788,5004,4575,4791,5007,3924,4140,4356,3927,4143,4359,3276,3492,3708,3279,3495,3711,2628,2844,3060,2631,2847,3063,1980,2196,2412,1983,2199,2415,1332,1548,1764,1335,1551,1767,684,900,1116,687,903,1119,36,252,468,39,255,471,4578,4794,5010,4581,4797,5013,3930,4146,4362,3933,4149,4365,3282,3498,3714,3285,3501,3717,2634,2850,3066,2637,2853,3069,1986,2202,2418,1989,2205,2421,1338,1554,1770,1341,1557,1773,690,906,1122,693,909,1125,42,258,474,45,261,477,4584,4800,5016,4587,4803,5019,3936,4152,4368,3939,4155,4371,3288,3504,3720,3291,3507,3723,2640,2856,3072,2643,2859,3075,1992,2208,2424,1995,2211,2427,1344,1560,1776,1347,1563,1779,696,912,1128,699,915,1131,48,264,480,51,267,483,4590,4806,5022,4593,4809,5025,3942,4158,4374,3945,4161,4377,3294,3510,3726,3297,3513,3729,2646,2862,3078,2649,2865,3081,1998,2214,2430,2001,2217,2433,1350,1566,1782,1353,1569,1785,702,918,1134,705,921,1137,54,270,486,57,273,489,4596,4812,5028,4599,4815,5031,3948,4164,4380,3951,4167,4383,3300,3516,3732,3303,3519,3735,2652,2868,3084,2655,2871,3087,2004,2220,2436,2007,2223,2439,1356,1572,1788,1359,1575,1791,708,924,1140,711,927,1143,60,276,492,63,279,495,4602,4818,5034,4605,4821,5037,3954,4170,4386,3957,4173,4389,3306,3522,3738,3309,3525,3741,2658,2874,3090,2661,2877,3093,2010,2226,2442,2013,2229,2445,1362,1578,1794,1365,1581,1797,714,930,1146,717,933,1149,66,282,498,69,285,501};
    int panel3[288] = {4608,4824,5040,4611,4827,5043,3960,4176,4392,3963,4179,4395,3312,3528,3744,3315,3531,3747,2664,2880,3096,2667,2883,3099,2016,2232,2448,2019,2235,2451,1368,1584,1800,1371,1587,1803,720,936,1152,723,939,1155,72,288,504,75,291,507,4614,4830,5046,4617,4833,5049,3966,4182,4398,3969,4185,4401,3318,3534,3750,3321,3537,3753,2670,2886,3102,2673,2889,3105,2022,2238,2454,2025,2241,2457,1374,1590,1806,1377,1593,1809,726,942,1158,729,945,1161,78,294,510,81,297,513,4620,4836,5052,4623,4839,5055,3972,4188,4404,3975,4191,4407,3324,3540,3756,3327,3543,3759,2676,2892,3108,2679,2895,3111,2028,2244,2460,2031,2247,2463,1380,1596,1812,1383,1599,1815,732,948,1164,735,951,1167,84,300,516,87,303,519,4626,4842,5058,4629,4845,5061,3978,4194,4410,3981,4197,4413,3330,3546,3762,3333,3549,3765,2682,2898,3114,2685,2901,3117,2034,2250,2466,2037,2253,2469,1386,1602,1818,1389,1605,1821,738,954,1170,741,957,1173,90,306,522,93,309,525,4632,4848,5064,4635,4851,5067,3984,4200,4416,3987,4203,4419,3336,3552,3768,3339,3555,3771,2688,2904,3120,2691,2907,3123,2040,2256,2472,2043,2259,2475,1392,1608,1824,1395,1611,1827,744,960,1176,747,963,1179,96,312,528,99,315,531,4638,4854,5070,4641,4857,5073,3990,4206,4422,3993,4209,4425,3342,3558,3774,3345,3561,3777,2694,2910,3126,2697,2913,3129,2046,2262,2478,2049,2265,2481,1398,1614,1830,1401,1617,1833,750,966,1182,753,969,1185,102,318,534,105,321,537};
    int panel4[288] = {4644,4860,5076,4647,4863,5079,3996,4212,4428,3999,4215,4431,3348,3564,3780,3351,3567,3783,2700,2916,3132,2703,2919,3135,2052,2268,2484,2055,2271,2487,1404,1620,1836,1407,1623,1839,756,972,1188,759,975,1191,108,324,540,111,327,543,4650,4866,5082,4653,4869,5085,4002,4218,4434,4005,4221,4437,3354,3570,3786,3357,3573,3789,2706,2922,3138,2709,2925,3141,2058,2274,2490,2061,2277,2493,1410,1626,1842,1413,1629,1845,762,978,1194,765,981,1197,114,330,546,117,333,549,4656,4872,5088,4659,4875,5091,4008,4224,4440,4011,4227,4443,3360,3576,3792,3363,3579,3795,2712,2928,3144,2715,2931,3147,2064,2280,2496,2067,2283,2499,1416,1632,1848,1419,1635,1851,768,984,1200,771,987,1203,120,336,552,123,339,555,4662,4878,5094,4665,4881,5097,4014,4230,4446,4017,4233,4449,3366,3582,3798,3369,3585,3801,2718,2934,3150,2721,2937,3153,2070,2286,2502,2073,2289,2505,1422,1638,1854,1425,1641,1857,774,990,1206,777,993,1209,126,342,558,129,345,561,4668,4884,5100,4671,4887,5103,4020,4236,4452,4023,4239,4455,3372,3588,3804,3375,3591,3807,2724,2940,3156,2727,2943,3159,2076,2292,2508,2079,2295,2511,1428,1644,1860,1431,1647,1863,780,996,1212,783,999,1215,132,348,564,135,351,567,4674,4890,5106,4677,4893,5109,4026,4242,4458,4029,4245,4461,3378,3594,3810,3381,3597,3813,2730,2946,3162,2733,2949,3165,2082,2298,2514,2085,2301,2517,1434,1650,1866,1437,1653,1869,786,1002,1218,789,1005,1221,138,354,570,141,357,573};
    int panel5[288] = {4680,4896,5112,4683,4899,5115,4032,4248,4464,4035,4251,4467,3384,3600,3816,3387,3603,3819,2736,2952,3168,2739,2955,3171,2088,2304,2520,2091,2307,2523,1440,1656,1872,1443,1659,1875,792,1008,1224,795,1011,1227,144,360,576,147,363,579,4686,4902,5118,4689,4905,5121,4038,4254,4470,4041,4257,4473,3390,3606,3822,3393,3609,3825,2742,2958,3174,2745,2961,3177,2094,2310,2526,2097,2313,2529,1446,1662,1878,1449,1665,1881,798,1014,1230,801,1017,1233,150,366,582,153,369,585,4692,4908,5124,4695,4911,5127,4044,4260,4476,4047,4263,4479,3396,3612,3828,3399,3615,3831,2748,2964,3180,2751,2967,3183,2100,2316,2532,2103,2319,2535,1452,1668,1884,1455,1671,1887,804,1020,1236,807,1023,1239,156,372,588,159,375,591,4698,4914,5130,4701,4917,5133,4050,4266,4482,4053,4269,4485,3402,3618,3834,3405,3621,3837,2754,2970,3186,2757,2973,3189,2106,2322,2538,2109,2325,2541,1458,1674,1890,1461,1677,1893,810,1026,1242,813,1029,1245,162,378,594,165,381,597,4704,4920,5136,4707,4923,5139,4056,4272,4488,4059,4275,4491,3408,3624,3840,3411,3627,3843,2760,2976,3192,2763,2979,3195,2112,2328,2544,2115,2331,2547,1464,1680,1896,1467,1683,1899,816,1032,1248,819,1035,1251,168,384,600,171,387,603,4710,4926,5142,4713,4929,5145,4062,4278,4494,4065,4281,4497,3414,3630,3846,3417,3633,3849,2766,2982,3198,2769,2985,3201,2118,2334,2550,2121,2337,2553,1470,1686,1902,1473,1689,1905,822,1038,1254,825,1041,1257,174,390,606,177,393,609};
    int panel6[288] = {4716,4932,5148,4719,4935,5151,4068,4284,4500,4071,4287,4503,3420,3636,3852,3423,3639,3855,2772,2988,3204,2775,2991,3207,2124,2340,2556,2127,2343,2559,1476,1692,1908,1479,1695,1911,828,1044,1260,831,1047,1263,180,396,612,183,399,615,4722,4938,5154,4725,4941,5157,4074,4290,4506,4077,4293,4509,3426,3642,3858,3429,3645,3861,2778,2994,3210,2781,2997,3213,2130,2346,2562,2133,2349,2565,1482,1698,1914,1485,1701,1917,834,1050,1266,837,1053,1269,186,402,618,189,405,621,4728,4944,5160,4731,4947,5163,4080,4296,4512,4083,4299,4515,3432,3648,3864,3435,3651,3867,2784,3000,3216,2787,3003,3219,2136,2352,2568,2139,2355,2571,1488,1704,1920,1491,1707,1923,840,1056,1272,843,1059,1275,192,408,624,195,411,627,4734,4950,5166,4737,4953,5169,4086,4302,4518,4089,4305,4521,3438,3654,3870,3441,3657,3873,2790,3006,3222,2793,3009,3225,2142,2358,2574,2145,2361,2577,1494,1710,1926,1497,1713,1929,846,1062,1278,849,1065,1281,198,414,630,201,417,633,4740,4956,5172,4743,4959,5175,4092,4308,4524,4095,4311,4527,3444,3660,3876,3447,3663,3879,2796,3012,3228,2799,3015,3231,2148,2364,2580,2151,2367,2583,1500,1716,1932,1503,1719,1935,852,1068,1284,855,1071,1287,204,420,636,207,423,639,4746,4962,5178,4749,4965,5181,4098,4314,4530,4101,4317,4533,3450,3666,3882,3453,3669,3885,2802,3018,3234,2805,3021,3237,2154,2370,2586,2157,2373,2589,1506,1722,1938,1509,1725,1941,858,1074,1290,861,1077,1293,210,426,642,213,429,645};
    
    
        void onConnect( ofxLibwebsockets::Event& args );
        void onOpen( ofxLibwebsockets::Event& args );
        void onClose( ofxLibwebsockets::Event& args );
        void onIdle( ofxLibwebsockets::Event& args );
        void onMessage( ofxLibwebsockets::Event& args );
        void onBroadcast( ofxLibwebsockets::Event& args );
};
